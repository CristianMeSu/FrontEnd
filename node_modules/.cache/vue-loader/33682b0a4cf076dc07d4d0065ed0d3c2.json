{"remainingRequest":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Xampp\\htdocs\\FrontEnd\\src\\views\\administracion\\users\\Detalle.vue?vue&type=style&index=0&id=770fc52c&scoped=true&lang=css&","dependencies":[{"path":"D:\\Xampp\\htdocs\\FrontEnd\\src\\views\\administracion\\users\\Detalle.vue","mtime":1637077956773},{"path":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636401895556},{"path":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636401901227},{"path":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\postcss-loader\\src\\index.js","mtime":1636401897499},{"path":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636401893889},{"path":"D:\\Xampp\\htdocs\\FrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":1636401899309}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yZWQgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmVkICFpbXBvcnRhbnQgOwp9CgphI2J0bkVkaXRhcjpsaW5rLAphI2J0bkVkaXRhcjpob3ZlciwKYSNidG5FZGl0YXI6dmlzaXRlZCB7CiAgICBmb250LXdlaWdodDogbm9ybWFsIDsKICAgIGNvbG9yOiBsaWdodGJsdWUgOwogICAgcGFkZGluZzogLjVlbSA7Cn0KCiNpdFpvbmUgewogICAgbWFyZ2luLXRvcDogMi41ZW0gOwp9CgoucmlnaHQgewogICAgdGV4dC1hbGlnbjogcmlnaHQgOwp9CgouYnRuLXN1Y2Nlc3MgewogICAgbWFyZ2luLXJpZ2h0OiAyZW0gOwp9Cgouc2hvd1Bhc3N3b3JkIHsKICAgIGNvbG9yOiBncmV5IDsKICAgIG1hcmdpbi1sZWZ0OiAxZW0gOwp9Cgo="},{"version":3,"sources":["Detalle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6zBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Detalle.vue","sourceRoot":"src/views/administracion/users","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <Navbar />\r\n        <NavbarSideBar />\r\n\r\n        <div class=\"content-wrapper\">\r\n            <!-- Content Header (Page header) -->\r\n            <div class=\"content-header\">\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"row mb-2\">\r\n                        <div class=\"col-sm-6\">\r\n                            <h1 class=\"m-0\">\r\n                                {{ newData.name }} {{ newData.lastname }}\r\n                                <small v-if=\"! edit\">\r\n                                    |\r\n                                    <a href=\"javascript:;\" id=\"btnEditar\" @click=\"edit=true\">\r\n                                        <span class=\"right badge badge-secondary\">\r\n                                            Editar\r\n                                        </span>\r\n                                    </a>\r\n                                </small>\r\n                            </h1>\r\n                        </div><!-- /.col -->\r\n                        <div class=\"col-sm-6\">\r\n                            <ol class=\"breadcrumb float-sm-right\">\r\n                                <li class=\"breadcrumb-item\"><router-link to=\"/Dashboard\">Dashboard</router-link></li>\r\n                                <li class=\"breadcrumb-item\"><router-link to=\"/Usuarios\">Usuarios</router-link></li>\r\n                                <li class=\"breadcrumb-item active\">Detalle de registro # {{ getUrlQueryId() }}</li>\r\n                            </ol>\r\n                        </div><!-- /.col -->\r\n                    </div><!-- /.row -->\r\n                </div><!-- /.container-fluid -->\r\n            </div>\r\n            <!-- /.content-header -->\r\n\r\n            <!-- Main content -->\r\n            <form id=\"userForm\">\r\n                <div class=\"content\" id=\"readonly\">\r\n                    <div class=\"container-fluid\">\r\n                        <div class=\"card\">\r\n                            <div class=\"container\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12 table-responsive\">\r\n                                        <table class=\"table table-striped table-hover\">\r\n\r\n                                            <tbody>\r\n\r\n                                                <tr>\r\n                                                    <th style=\"width: 20%\" scope=\"row\">Username:</th>\r\n                                                    <td >\r\n                                                        {{ newData.username }}\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Password:</th>\r\n                                                    <td >\r\n                                                        <span v-if=\"edit\">\r\n                                                            <div class=\"row\">\r\n                                                                <div class=\"col-md-6\" >\r\n                                                                    <input\r\n                                                                        type=\"text\"\r\n                                                                        class=\"form-control\"\r\n                                                                        placeholder=\"New Password\"\r\n                                                                        v-model=\"newData.password\"\r\n                                                                    />\r\n                                                                </div>\r\n<!--                                                                <div class=\"col-md-6\" v-if=\"edit\">-->\r\n<!--                                                                    <button type=\"button\" class=\"btn btn-success\" @click=\"saveChanges\">-->\r\n<!--                                                                        <i class=\"fas fa-check\"></i>-->\r\n<!--                                                                    </button>-->\r\n<!--                                                                </div>-->\r\n                                                            </div>\r\n\r\n                                                        </span>\r\n                                                        <span v-else>\r\n                                                            <span v-if=\"!showPassword\">\r\n                                                                [ Encrypted ]\r\n                                                                <i class=\"fas fa-eye showPassword\" @click=\"showPassword = !showPassword\"></i>\r\n                                                            </span>\r\n\r\n                                                            <span v-else>\r\n                                                                {{ password }}\r\n                                                                <i class=\"fas fa-eye-slash showPassword\" @click=\"showPassword = !showPassword\"></i>\r\n                                                            </span>\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <h3 style=\"margin-top: 1em ;\">Details</h3>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Rol:</th>\r\n                                                    <td >\r\n                                                        <select\r\n                                                            v-if=\"edit\"\r\n                                                            name=\"\"\r\n                                                            id=\"\"\r\n                                                            class=\"form-control\"\r\n                                                            v-model=\"newData.rol\"\r\n                                                        >\r\n                                                            <option\r\n                                                                v-for = \"role in roles\"\r\n                                                                :value = \"role.name.split('_')[ 1 ]\"\r\n                                                            >{{ role.name.split('_')[ 1 ] }}</option>\r\n                                                        </select>\r\n                                                        <span v-else>{{ newData.rol }}</span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Status:</th>\r\n                                                    <td >\r\n                                                        <input\r\n                                                            v-if=\"edit\"\r\n                                                            id=\"st\"\r\n                                                            type=\"checkbox\"\r\n                                                            class=\"\"\r\n                                                            :checked=\"newData.chStatus\"\r\n                                                            @click=\"changeStatus()\"\r\n                                                        >\r\n                                                        <label v-if=\"edit\" for=\"st\" style=\"margin-left: 1em ;\" :class=\"cssStatus\">{{ dataStatus }}</label>\r\n                                                        <span v-else :class=\"cssStatus\">{{ newData.dataStatus }}</span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Name:</th>\r\n                                                    <td >\r\n                                                        <input\r\n                                                            v-if=\"edit\"\r\n                                                            id=\"name\"\r\n                                                            type=\"text\"\r\n                                                            class=\"form-control\"\r\n                                                            v-model=\"newData.name\"\r\n                                                        >\r\n                                                        <span v-else>{{ newData.name }}</span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Lastname:</th>\r\n                                                    <td >\r\n                                                        <input\r\n                                                            v-if=\"edit\"\r\n                                                            id=\"name\"\r\n                                                            type=\"text\"\r\n                                                            class=\"form-control\"\r\n                                                            v-model=\"newData.lastname\"\r\n                                                        >\r\n                                                        <span v-else>{{ newData.lastname }}</span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Email:</th>\r\n                                                    <td >\r\n                                                        <input\r\n                                                            v-if=\"edit\"\r\n                                                            id=\"email\"\r\n                                                            type=\"email\"\r\n                                                            class=\"form-control\"\r\n                                                            v-model=\"newData.email\"\r\n                                                        >\r\n                                                        <span v-else>{{ newData.email }}</span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Empresas:</th>\r\n                                                    <td >\r\n                                                        <div class=\"row\" v-if=\"edit\">\r\n                                                            <div class=\"col-md-5\">\r\n                                                                <select\r\n                                                                    name=\"\"\r\n                                                                    id=\"\"\r\n                                                                    class=\"form-control\"\r\n                                                                    v-model=\"newData.empresaId\"\r\n                                                                >\r\n                                                                    <option\r\n                                                                        v-for = \"empresa in empresas\"\r\n                                                                        :value = \"empresa[ 0 ]\"\r\n                                                                    >{{ empresa[ 1 ] }}</option>\r\n                                                                </select>\r\n                                                            </div>\r\n                                                            <div class=\"col-md-1\">\r\n                                                                <button @click=\"addUserToCompany()\" type=\"button\" class=\"btn btn-success\">\r\n                                                                    <i class=\"fas fa-plus-circle\"></i>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                            <div class=\"col-md-6\">\r\n                                                                <ul id=\"lEmpresas\">\r\n                                                                    <li v-for=\"e in newData.empresasList\" :id=\"'empresa-'+e.id\">\r\n                                                                        <i @click=\"borrarEmpresa( e.id , e.nombreEmpresa )\" class=\"fas fa-times\" style=\"color:red; margin-right: .8em; cursor: pointer;\"></i>\r\n                                                                            {{ e.nombreEmpresa }}\r\n                                                                    </li>\r\n                                                                </ul>\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        <span v-else>\r\n                                                            <ul>\r\n                                                                <li v-for=\"e in newData.empresasList\">\r\n                                                                    {{ e.nombreEmpresa }}\r\n                                                                    <span v-if=\"edit\"> X </span>\r\n                                                                </li>\r\n                                                            </ul>\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th scope=\"row\">Módulos:</th>\r\n                                                    <td >\r\n                                                        <div class=\"row\" v-if=\"edit\">\r\n                                                            <div class=\"col-md-5\">\r\n                                                                <select\r\n                                                                    name=\"\"\r\n                                                                    id=\"\"\r\n                                                                    class=\"form-control\"\r\n                                                                    v-model=\"newData.moduloId\"\r\n                                                                >\r\n                                                                    <option\r\n                                                                        v-for = \"modulo in modulos\"\r\n                                                                        :value = \"modulo[ 0 ]\"\r\n                                                                    >{{ modulo[ 1 ] }}</option>\r\n                                                                </select>\r\n                                                            </div>\r\n                                                            <div class=\"col-md-1\">\r\n                                                                <button @click=\"addUserToModulo()\" type=\"button\" class=\"btn btn-success\">\r\n                                                                    <i class=\"fas fa-plus-circle\"></i>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                            <div class=\"col-md-6\">\r\n                                                                <ul id=\"lModulos\">\r\n                                                                    <li v-for=\"e in newData.modulosList\" :id=\"'modulo-'+e.id\">\r\n                                                                        <i @click=\"borrarModulo( e.id , e.moduleName )\" class=\"fas fa-times\" style=\"color:red; margin-right: .8em; cursor: pointer;\"></i>\r\n                                                                            {{ e.moduleName }}\r\n                                                                    </li>\r\n                                                                </ul>\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        <span v-else>\r\n                                                            <ul>\r\n                                                                <li v-for=\"e in newData.modulosList\">\r\n                                                                    {{ e.moduleName }}\r\n                                                                    <span v-if=\"edit\"> X </span>\r\n                                                                </li>\r\n                                                            </ul>\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th>Secret Key:</th>\r\n                                                    <td>\r\n                                                        <span >\r\n                                                            <span v-if=\"!showSecretKey4GA\">\r\n                                                                [ Encrypted ]\r\n                                                                <i class=\"fas fa-eye showPassword\" @click=\"showSecretKey4GA = !showSecretKey4GA\"></i>\r\n                                                            </span>\r\n\r\n                                                            <span v-else>\r\n                                                                {{ secretKey4GA }}\r\n                                                                <i class=\"fas fa-eye-slash showPassword\" @click=\"showSecretKey4GA = !showSecretKey4GA\"></i>\r\n                                                            </span>\r\n                                                        </span>\r\n                                                    </td>\r\n                                                </tr>\r\n\r\n                                                <tr>\r\n                                                    <th>QR Access Code Image:</th>\r\n                                                        <td>\r\n                                                            <VueQRCodeComponent :text=\"qrCode\" :size=\"200\"></VueQRCodeComponent>\r\n                                                        </td>\r\n                                                </tr>\r\n\r\n                                            </tbody>\r\n                                        </table>\r\n\r\n                                        <div class=\"right\" v-if=\"edit\">\r\n                                            <button type=\"button\" class=\"btn btn-success\" id=\"btnEditar\" @click=\"saveChanges\"> Guardar Detalles </button>\r\n                                            <button type=\"button\" class=\"btn btn-danger\" id=\"btnEditar\" @click=\"cancelChanges\"> Cancelar edición </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"content\" id=\"itZone\" v-if=\"IT\">\r\n                    <div class=\"container-fluid\">\r\n                        <div class=\"card\">\r\n                            <div class=\"container\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12\">\r\n                                        <div>\r\n                                            <h2>IT Zone</h2>\r\n                                            <table class=\"table table-striped table-hover\">\r\n                                                <tbody>\r\n\r\n                                                    <tr>\r\n                                                        <th>Date Last Modified</th>\r\n                                                        <td>{{ dateLastModified }}</td>\r\n                                                    </tr>\r\n\r\n                                                    <tr>\r\n                                                        <th>Last User Who Modified</th>\r\n                                                        <td>{{ userWhoModified }}</td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n\r\n                                            </table>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"@/components/navbar/Navbar\";\r\nimport NavbarSideBar from \"@/components/navbar/NavbarSidebar\";\r\nimport requests from \"@/utils/requests\";\r\nimport errorCodes from \"@/utils/errorCodes\";\r\nimport VueQRCodeComponent from 'vue-qrcode-component'\r\n\r\nexport default {\r\n    name: \"Details\"\r\n\r\n    , components: {\r\n        Navbar\r\n        , NavbarSideBar\r\n        , VueQRCodeComponent\r\n    }\r\n\r\n    , data() {\r\n        return {\r\n            edit : false\r\n            , IT : false\r\n            , id : null\r\n            , u : null\r\n\r\n            , empresas : null\r\n            , modulos : null\r\n            , roles : null\r\n            , oneRole : null\r\n            , showPassword : false\r\n            , showSecretKey4GA : false\r\n            , qrCode : ''\r\n\r\n            , username : null\r\n            , password : null\r\n            , rol : null\r\n            , name : null\r\n            , lastname : null\r\n            , empresaId : null\r\n            , secretKey4GA : null\r\n            , email : null\r\n            , dataStatus : null\r\n            , chStatus : false\r\n            , dateLastModified : null\r\n            , userWhoModified : null\r\n            , moduloId : null\r\n            , moduloName : null\r\n            , modulosList : null\r\n\r\n            , newData: {\r\n                username : null\r\n                , password : null\r\n                , rol : null\r\n                , name : null\r\n                , lastname : null\r\n                , empresaId : null\r\n                , empresa : null\r\n                , empresasList : null\r\n                , dataStatus : null\r\n                , chStatus : false\r\n                , dateLastModified : null\r\n                , userWhoModified : null\r\n                , email : null\r\n                , moduloId : null\r\n                , moduloName : null\r\n                , modulosList : null\r\n            }\r\n\r\n            , cssStatus : \"stActive\"\r\n\r\n        }\r\n    }\r\n\r\n    , methods: {\r\n        getUrlQueryId() {\r\n            return this.$route.params.id ;\r\n        }\r\n\r\n        , async getRecordData() {\r\n            // let notification ;\r\n\r\n            this.u = await requests.get(\r\n                'users/get-details/'+ this.getUrlQueryId()\r\n            ) ;\r\n            const u = this.u ;\r\n\r\n            console.log( \"u: \" , u.data ) ;\r\n\r\n            this.username = u.data.user.username ;\r\n            this.password = u.data.user.password ;\r\n            this.dataStatus = u.data.userStatus.stName ;\r\n            this.chStatus = u.data.user.dataStatus === 1 ;\r\n            this.rol = u.data.user.roles[ 0 ] ? u.data.user.roles[ 0 ].name.split( \"_\" )[ 1 ] : null ;\r\n            this.dateLastModified = u.data.user.dateLastModified ;\r\n            this.userWhoModified = u.data.userModifier.username ;\r\n            console.log(\"aqui\",this.userWhoModified)\r\n            this.secretKey4GA = u.data.user.secretKey4GA ;\r\n            this.email = u.data.userEmails[ 0 ].email ;\r\n            this.qrCode = this.getQRCode().toString() ;\r\n\r\n            this.name = u.data.userDetails ? u.data.userDetails.userName : null ;\r\n            this.lastname = u.data.userDetails ? u.data.userDetails.userLastname : null ;\r\n            // this.empresaId = u.data.userDetails ? u.data.userDetails.empresaId : null ;\r\n\r\n            this.empresaId = 1 ;\r\n            this.empresa = u.data.userEmpresa ? u.data.userEmpresa[ 1 ] : null ;\r\n            this.empresasList = u.data.userCompanies ? u.data.userCompanies : null ;\r\n\r\n            this.moduloId = 1 ;\r\n            this.modulo = u.data.userModules ? u.data.userModules[ 1 ] : null ;\r\n            this.modulosList = u.data.userModules ? u.data.userModules : null ;\r\n\r\n            this.newData.name = this.name ;\r\n            this.newData.lastname = this.lastname ;\r\n\r\n            this.newData.empresaId = this.empresaId ;\r\n            this.newData.empresa = this.empresa ;\r\n            this.newData.empresasList = this.empresasList ;\r\n\r\n            this.newData.moduloId = this.moduloId ;\r\n            this.newData.moduloName = this.moduloName ;\r\n            this.newData.modulosList = this.modulosList ;\r\n\r\n            this.newData.username = this.username ;\r\n            // this.newData.password = this.password ;\r\n            this.newData.dataStatus = this.dataStatus ;\r\n            this.newData.rol = this.rol ;\r\n            this.newData.dateLastModified = this.dateLastModified ;\r\n            this.newData.userWhoModified = this.userWhoModified ;\r\n            this.newData.email = this.email ;\r\n\r\n            this.newData.chStatus = this.chStatus ;\r\n            this.cssStatus = this.chStatus === 1 || this.chStatus === true ? 'stActive' : 'stDeactivated' ;\r\n\r\n            // console.log( \"this.newData: \" , this.newData ) ;\r\n        }\r\n\r\n        , changeStatus() {\r\n            if ( this.newData.chStatus ) {\r\n                this.newData.chStatus = false ;\r\n                this.dataStatus = \"Deactivated\" ;\r\n                this.cssStatus = 'stDeactivated' ;\r\n            } else {\r\n                this.newData.chStatus = true ;\r\n                this.dataStatus = \"Active\" ;\r\n                this.cssStatus = 'stActive' ;\r\n            }\r\n        }\r\n\r\n        // , async changePassword() {\r\n        , async saveChanges() {\r\n            const rol = await requests.get(\r\n                'roles/one/'+ this.newData.rol\r\n                , [ this.newData.rol ]\r\n            ) ;\r\n\r\n            // const rol = this.get1Role() ;\r\n            const theRol = {\r\n                \"id\" : rol.data.id\r\n                , \"name\" : rol.data.name\r\n            }\r\n\r\n            // console.log( \"this.newData.rol: \" , this.newData.rol ) ;\r\n            // console.log( \"rol object: \" , rol.data ) ;\r\n            // console.log( \"theRol object: \" , [ theRol ] ) ;\r\n\r\n            let notification ;\r\n            let st = this.newData.chStatus === true || this.newData.chStatus === 1 ? 1 : 2 ;\r\n\r\n            const userData = {\r\n                \"password\" : this.newData.password\r\n                , \"roles\" : [ theRol ]\r\n                , \"dataStatus\" : st\r\n            } ;\r\n\r\n            // console.log( \"userData: \" , userData ) ;\r\n\r\n            const userResponse = await requests.put(\r\n                'users/change-user-data/'+ this.getUrlQueryId()\r\n                , userData\r\n            ) ;\r\n            // console.log( \"userResponse: \" , userResponse ) ;\r\n\r\n            let userDetails ;\r\n            let userDetailsResponse ;\r\n            if ( this.newData.name !== null && this.newData.lastname !== null ) {\r\n                userDetails = {\r\n                    \"idUser\" : this.getUrlQueryId()\r\n                    , \"userName\" : this.newData.name\r\n                    , \"userLastname\" : this.newData.lastname\r\n                    , \"dataStatus\" : st\r\n                }\r\n\r\n                // console.log( \"this.u.data.userDetails: \" , this.u.data.userDetails ) ;\r\n                if ( this.u.data.userDetails !== null ) {\r\n                    // console.log( \"PUT\" ) ;\r\n                    userDetailsResponse = await requests.put(\r\n                        'users/change-details/'+ this.getUrlQueryId()\r\n                        , userDetails\r\n                    ) ;\r\n                } else {\r\n                    // console.log( \"POST\" ) ;\r\n                    userDetailsResponse = await requests.post(\r\n                        'users/details/new'\r\n                        , userDetails\r\n                    ) ;\r\n                }\r\n                // console.log( \"userDetails: \" , userDetails ) ;\r\n                // console.log( \"userDetailsResponse: \" , userDetailsResponse ) ;\r\n            }\r\n\r\n            const userEmails = {\r\n                \"email\" : this.newData.email\r\n                , \"dataStatus\" : st\r\n            }\r\n            const userEmailsResponse = await requests.put(\r\n                'users/change-emails/'+ this.getUrlQueryId()\r\n                , userEmails\r\n            ) ;\r\n            // console.log( \"userEmailsResponse: \" , userEmailsResponse ) ;\r\n\r\n\r\n            if (\r\n                (userResponse.status === 200\r\n                || userResponse.status === 201)\r\n\r\n                // &&( userDetailsResponse.status === 200\r\n                // || userDetailsResponse.status === 201)\r\n\r\n                &&( userEmailsResponse.status === 200\r\n                || userEmailsResponse.status === 201 ) ) {\r\n                // console.log(\"200-201\") ;\r\n\r\n                notification = errorCodes.get( 200 ) ;\r\n                // console.log(notification)\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                    , text: `<h6>${notification.message}</h6>`\r\n                    , type: `${notification.type}`\r\n                    , duration: 10000\r\n                } ) ;\r\n\r\n                this.cancelChanges() ;\r\n\r\n            } else {\r\n                let st ;\r\n                // if ( response.data !== typeof number ) st = 401 ;\r\n                // else\r\n                // st = 401 ;\r\n\r\n                notification = errorCodes.get( st ) ;\r\n                // console.log(notification)\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h4>Error Code: ${notification.code}</h4>`\r\n                    , text: `<h5>${notification.message}</h5>`\r\n                    , type: `${notification.type}`\r\n                    , duration: -1\r\n                } ) ;\r\n                // if ( st === 401 ) await this.$router.push( '/logout' ) ;\r\n            }\r\n\r\n        }\r\n\r\n        , cancelChanges() {\r\n            // console.log(\"cancelChanges\") ;\r\n            this.edit = false ;\r\n            this.getRecordData() ;\r\n        }\r\n\r\n        , async getRoles() {\r\n            const roles = await requests.get(\r\n                'roles/'\r\n            ) ;\r\n\r\n            this.roles = roles.data ;\r\n            // console.log( this.roles ) ;\r\n        }\r\n\r\n        , async get1Role() {\r\n            const rol = await requests.get(\r\n                'roles/one/'+ this.newData.rol\r\n                , [ this.newData.rol ]\r\n            ) ;\r\n\r\n            console.log( \"this.newData.rol: \" , this.newData.rol ) ;\r\n            console.log( \"get1Role: \" , rol.data ) ;\r\n\r\n            return rol.data ;\r\n        }\r\n\r\n        , async getEmpresas() {\r\n            const empresas = await requests.get(\r\n                'empresas/'\r\n            ) ;\r\n\r\n            this.empresas = empresas.data.data ;\r\n            // console.log( this.empresas ) ;\r\n        }\r\n\r\n        , async getModules() {\r\n            const modules = await requests.get(\r\n                'modulos/'\r\n            ) ;\r\n\r\n            this.modulos = modules.data.data ;\r\n            // console.log( \"this.modulos: \" , this.modulos ) ;\r\n        }\r\n\r\n        , async borrarEmpresa( idEmpresa , nombreEmpresa ) {\r\n            // Se recibe el id del registro, no de la empresa\r\n\r\n            let notification ;\r\n\r\n            let result = confirm( `Desea retirar usuario \"${ this.newData.username }\" de la empresa \"${ nombreEmpresa }\"` , \"AERP\" ) ;\r\n            if ( result ) {\r\n\r\n                const deleteUserFromCompany = await requests.delete(\r\n                    'users/details/d/'+ idEmpresa\r\n                ) ;\r\n\r\n                console.log( \"deleteUserFromCompany: \" , deleteUserFromCompany ) ;\r\n\r\n                if ( deleteUserFromCompany.status === 200 || deleteUserFromCompany.status === 201 ) {\r\n                    notification = errorCodes.get( deleteUserFromCompany.status ) ;\r\n                    this.$notify({\r\n                        group: 'foo'\r\n                        , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                        , text: `<h6>${notification.message}</h6>`\r\n                        , type: `${notification.type}`\r\n                        , duration: 10000\r\n                    } ) ;\r\n\r\n                    let ul = document.getElementById( \"lEmpresas\" ) ;\r\n                        let item = ul.querySelector( \"#empresa-\"+ idEmpresa ) ;\r\n                            ul.removeChild( item ) ;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        , async addUserToCompany() {\r\n            // console.log( this.newData.empresaId ) ;\r\n            let notification ;\r\n\r\n            const data = {\r\n                \"idUser\" : this.getUrlQueryId()\r\n                , \"empresaId\" : this.newData.empresaId\r\n            }\r\n\r\n            const addUserToCompany = await requests.post(\r\n                'users/details/addUserToCompany'\r\n                , data\r\n            ) ;\r\n\r\n            if ( addUserToCompany.status === 200 || addUserToCompany.status === 201 ) {\r\n                notification = errorCodes.get( addUserToCompany.status ) ;\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                    , text: `<h6>${notification.message}</h6>`\r\n                    , type: `${notification.type}`\r\n                    , duration: 5000\r\n                } ) ;\r\n\r\n                this.cancelChanges() ;\r\n                setTimeout( () => {\r\n                    // console.log( \"setTimeOut\" ) ;\r\n                    this.edit = true ;\r\n                }, 1000 ) ;\r\n\r\n            } else {\r\n                notification = errorCodes.get( 202 ) ;\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                    , text: `<h6>${notification.message}. But already registered.</h6>`\r\n                    , type: `warn`\r\n                    , duration: 10000\r\n                } ) ;\r\n            }\r\n            // console.log( \"addUserToCompany: \" , addUserToCompany ) ;\r\n\r\n        }\r\n\r\n        , async borrarModulo( idModulo , moduleName ) {\r\n            // Se recibe el id del registro, no de la empresa\r\n\r\n            let notification ;\r\n\r\n            let result = confirm( `Desea retirar usuario \"${ this.newData.username }\" del acceso al módulo \"${ moduleName }\"` , \"AERP\" ) ;\r\n            if ( result ) {\r\n\r\n                const deleteUserFromModule = await requests.delete(\r\n                    'users/details/dm/'+ idModulo\r\n                ) ;\r\n\r\n                console.log( \"deleteUserFromModule: \" , deleteUserFromModule ) ;\r\n\r\n                if ( deleteUserFromModule.status === 200 || deleteUserFromModule.status === 201 ) {\r\n                    notification = errorCodes.get( deleteUserFromModule.status ) ;\r\n                    this.$notify({\r\n                        group: 'foo'\r\n                        , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                        , text: `<h6>${notification.message}</h6>`\r\n                        , type: `${notification.type}`\r\n                        , duration: 10000\r\n                    } ) ;\r\n\r\n                    let ul = document.getElementById( \"lModulos\" ) ;\r\n                        let item = ul.querySelector( \"#modulo-\"+ idModulo ) ;\r\n                            ul.removeChild( item ) ;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        , async addUserToModulo() {\r\n            // console.log( this.newData.empresaId ) ;\r\n            let notification ;\r\n\r\n            const data = {\r\n                \"idUser\" : this.getUrlQueryId()\r\n                , \"moduleId\" : this.newData.moduloId\r\n            }\r\n\r\n            //console.log( \"data: \" , data ) ;\r\n\r\n            const addUserToModule = await requests.post(\r\n                'users/details/addUserToModule'\r\n                , data\r\n            ) ;\r\n\r\n            if ( addUserToModule.status === 200 || addUserToModule.status === 201 ) {\r\n                notification = errorCodes.get( addUserToModule.status ) ;\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                    , text: `<h6>${notification.message}</h6>`\r\n                    , type: `${notification.type}`\r\n                    , duration: 5000\r\n                } ) ;\r\n\r\n                this.cancelChanges() ;\r\n                setTimeout( () => {\r\n                    // console.log( \"setTimeOut\" ) ;\r\n                    this.edit = true ;\r\n                }, 1000 ) ;\r\n\r\n            } else {\r\n                notification = errorCodes.get( 202 ) ;\r\n                this.$notify({\r\n                    group: 'foo'\r\n                    , title: `<h5>Message Code: ${notification.code}</h5>`\r\n                    , text: `<h6>${notification.message}. But already registered.</h6>`\r\n                    , type: `warn`\r\n                    , duration: 10000\r\n                } ) ;\r\n            }\r\n            console.log( \"addUserToModule: \" , addUserToModule ) ;\r\n\r\n        }\r\n\r\n        , getQRCode() {\r\n            const secretKey = this.secretKey4GA ;\r\n            const account = this.email ;\r\n            const issuer = \"Amistad-ERP\" ;\r\n            const url = \"otpauth://totp/\"\r\n                + encodeURIComponent( issuer + \":\" + account )\r\n                + \"?secret=\" + secretKey\r\n                + \"&issuer=\" + issuer\r\n            ;\r\n\r\n/*\r\n        // Ejemplo de cadena generada correctamente por el BackEnd\r\n        otpauth://totp/Amistad-ERP%3Alexcastillo.amistad%40gmail.com?secret=KGQNJGAYI5SVAZJDOXUXEKJDYT3QOZQ7&issuer=Amistad-ERP\r\n\r\n*/\r\n            return url.toString() ;\r\n        }\r\n\r\n    }\r\n\r\n    , created() {\r\n        this.getRecordData() ;\r\n        this.getRoles() ;\r\n        // this.get1Role() ;\r\n        this.getEmpresas() ;\r\n        this.getModules() ;\r\n        // this.changeStatus() ;\r\n        // this.getQRCode() ;\r\n    }\r\n\r\n    , mounted() {\r\n        if ( localStorage.getItem( \"roles\" )  === \"ROLE_IT\" ) this.IT = true ;\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .red {\r\n        background-color: red !important ;\r\n    }\r\n\r\n    a#btnEditar:link,\r\n    a#btnEditar:hover,\r\n    a#btnEditar:visited {\r\n        font-weight: normal ;\r\n        color: lightblue ;\r\n        padding: .5em ;\r\n    }\r\n\r\n    #itZone {\r\n        margin-top: 2.5em ;\r\n    }\r\n\r\n    .right {\r\n        text-align: right ;\r\n    }\r\n\r\n    .btn-success {\r\n        margin-right: 2em ;\r\n    }\r\n\r\n    .showPassword {\r\n        color: grey ;\r\n        margin-left: 1em ;\r\n    }\r\n\r\n</style>"]}]}